<!-- MAIN CONTAINER (Dunkelblau wie Flyer) -->
<div class="min-h-screen bg-[#1c1c2e] text-white font-sans pb-24 relative overflow-hidden selection:bg-[#ff7043] selection:text-white">
      
  <!-- Ambient Background Lights -->
  <div class="absolute top-[-10%] left-[-10%] w-[500px] h-[500px] bg-purple-600/20 rounded-full blur-[120px] pointer-events-none"></div>
  <div class="absolute bottom-[-10%] right-[-10%] w-[500px] h-[500px] bg-orange-500/10 rounded-full blur-[120px] pointer-events-none"></div>

  <!-- HEADER -->
  <header class="px-6 pt-12 pb-6 relative z-10">
    <!-- Search Bar -->
    <div class="relative group">
      <input type="text" placeholder="Suchen..." 
             class="w-full bg-[#2e2e42] text-gray-200 placeholder-gray-500 rounded-2xl py-3.5 pl-11 pr-4 border border-white/5 focus:outline-none focus:border-white/20 focus:bg-[#34344b] transition-all shadow-lg">
      <svg class="w-5 h-5 text-gray-500 absolute left-4 top-4 transition-colors group-focus-within:text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path></svg>
    </div>
  </header>

  <!-- STORIES / KATEGORIEN -->
  <section class="mb-8 overflow-x-auto no-scrollbar pl-6 relative z-10">
    <div class="flex space-x-5 pr-6">
      <div *ngFor="let cat of categoriesSig()" class="flex flex-col items-center space-y-2 flex-shrink-0 cursor-pointer group">
        <div class="w-[72px] h-[72px] rounded-2xl overflow-hidden border-2 border-transparent group-hover:border-[#ff7043] transition-all relative shadow-md">
          <img [src]="cat.iconUrl" class="w-full h-full object-cover transform group-hover:scale-110 transition-transform duration-500">
          <div class="absolute inset-0 bg-black/10 group-hover:bg-transparent transition-colors"></div>
        </div>
        <span class="text-xs text-gray-400 font-medium group-hover:text-white transition-colors">{{ cat.name }}</span>
      </div>
    </div>
  </section>

  <!-- FEED TITLE -->
  <div class="px-6 mb-4 flex justify-between items-end relative z-10">
    <h2 class="text-xl font-bold text-white tracking-wide">In deiner Nähe</h2>
    <button class="text-xs text-[#ff7043] font-semibold hover:text-[#ff8a65] transition-colors">Alle anzeigen</button>
  </div>

  <!-- GRID FEED -->
  <main class="px-4 grid grid-cols-2 gap-3 relative z-10 pb-4">
    <div *ngFor="let group of groupsSig()" 
         (click)="openGroup(group)"
         class="bg-[#2e2e42] rounded-2xl overflow-hidden relative shadow-lg hover:shadow-orange-500/10 active:scale-95 transition-all cursor-pointer border border-white/5 group">
      
      <!-- Card Image -->
      <div class="h-36 w-full relative overflow-hidden">
        <img [src]="group.imageUrl" class="w-full h-full object-cover transition-transform duration-700 group-hover:scale-105">
        <div class="absolute inset-0 bg-gradient-to-t from-[#2e2e42] to-transparent opacity-60"></div>
        
        <!-- Member Badge -->
        <div class="absolute top-2 right-2 bg-black/40 backdrop-blur-md px-2 py-1 rounded-lg border border-white/10 flex items-center gap-1">
           <span class="text-[10px] text-white font-bold">{{group.currentMembers}}/{{group.maxMembers}}</span>
        </div>
      </div>

      <!-- Card Content -->
      <div class="p-3 relative">
        <h3 class="text-sm font-bold text-white leading-tight mb-1.5 line-clamp-1">{{ group.title }}</h3>
        <p class="text-[10px] text-gray-400 mb-3 line-clamp-2 h-[2.5em] leading-relaxed">{{ group.description }}</p>
        
        <div class="flex items-center justify-between">
           <!-- Mini Avatars -->
           <div class="flex -space-x-2">
             <div *ngFor="let seed of group.avatarSeeds" class="w-6 h-6 rounded-full border border-[#2e2e42] bg-gray-700 overflow-hidden">
                <img [src]="'https://api.dicebear.com/7.x/avataaars/svg?seed=' + seed" class="w-full h-full">
             </div>
           </div>
           <!-- Arrow Btn -->
           <div class="w-7 h-7 rounded-full bg-[#3e3e52] flex items-center justify-center text-gray-300 group-hover:bg-[#ff7043] group-hover:text-white transition-colors">
             <svg class="w-3.5 h-3.5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path></svg>
           </div>
        </div>
      </div>
    </div>
  </main>

  <!-- BOTTOM NAVIGATION -->
  <nav class="fixed bottom-6 left-6 right-6 h-[70px] bg-[#252538]/95 backdrop-blur-xl rounded-[28px] flex justify-between items-center px-6 shadow-2xl border border-white/10 z-40">
    <button class="p-2 text-gray-400 hover:text-white transition-colors"><svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"></path></svg></button>
    <button class="p-2 text-gray-400 hover:text-white transition-colors"><svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.197-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.38-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z"></path></svg></button>
    
    <!-- Big Action Button -->
    <button (click)="openCreateModal()" class="relative -top-6 bg-gradient-to-tr from-[#ff8a65] to-[#ff7043] w-16 h-16 rounded-full shadow-lg shadow-orange-500/40 flex items-center justify-center text-white transform transition-all hover:scale-105 active:scale-95 border-4 border-[#1c1c2e]">
       <svg class="w-8 h-8" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"></path></svg>
    </button>

    <button class="p-2 text-gray-400 hover:text-white transition-colors"><svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-3.582 8-8 8a8.13 8.13 0 01-7.05-4h-3.95v-3.95A8.13 8.13 0 014 4c4.418 0 8 3.582 8 8z"></path></svg></button>
    <button class="p-2 text-gray-400 hover:text-white transition-colors"><svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path></svg></button>
  </nav>

  <!-- MODAL INTEGRATION -->
  <!-- Wenn eine Gruppe ausgewählt ist, zeigen wir das Modal an -->
  <app-join-modal 
    *ngIf="selectedGroup" 
    [group]="selectedGroup" 
    (close)="closeGroup()">
  </app-join-modal>
  <app-create-modal 
    *ngIf="isCreateModalOpen()" 
    (close)="closeCreateModal()">
  </app-create-modal>

</div>
